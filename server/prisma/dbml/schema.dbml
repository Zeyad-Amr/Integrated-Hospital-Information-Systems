//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Person {
  id String [pk]
  firstName String [not null]
  secondName String [not null]
  thirdName String [not null]
  fourthName String [not null]
  SSN String [unique, not null]
  verificationMethod IdentityEnum [not null]
  gender GenderEnum [not null]
  birthDate DateTime [not null]
  phone String [unique]
  email String [unique]
  governate String [not null]
  address String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  employee Employee
  patientVisits Visit [not null]
  companionVisits Visit [not null]
  CompanionsOnIncidents CompanionsOnIncidents [not null]
}

Table Employee {
  id String [pk]
  role RoleEnum [not null]
  shift ShiftEnum [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  user User
  person Person [not null]
  personID String [unique, not null]
  createdByEmployee Employee
  createdById String
  createdEmployees Employee [not null]
  visit Visit [not null]
  department Department [not null]
  departmentId String [not null]
}

Table User {
  username String [pk]
  password String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  employee Employee [not null]
  employeeId String [unique, not null]
}

Table Department {
  id String [pk]
  name String [unique, not null]
  Employees Employee [not null]
}

Table Visit {
  code String [pk]
  sequenceNumber Int
  kinship KinshipEnum
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  creator Employee [not null]
  creatorId String [not null]
  patient Person
  patientId String
  companion Person
  companionId String
  incident Incident
  incidentId String
  Car CarNumber
  carId String
  attendantName String
  attendantID String
}

Table Incident {
  id String [pk]
  description String
  numberOfPatients Int [not null]
  isCompleted Boolean [not null, default: false]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  Car CarNumber
  carId String
  visits Visit [not null]
  CompanionsOnIncidents CompanionsOnIncidents [not null]
}

Table CompanionsOnIncidents {
  companion Person [not null]
  companionId String [not null]
  incident Incident [not null]
  incidentId String [not null]

  indexes {
    (companionId, incidentId) [pk]
  }
}

Table CarNumber {
  id String [pk]
  firstChar String [not null]
  secondChar String [not null]
  thirdChar String [not null]
  number Int [not null]
  Incident Incident [not null]
  Visit Visit [not null]

  indexes {
    (firstChar, secondChar, thirdChar, number) [unique]
  }
}

Enum IdentityEnum {
  NATIONALIDCARD
  PASSPORT
}

Enum GenderEnum {
  MALE
  FEMALE
}

Enum KinshipEnum {
  BROTHER
  SISTER
  FATHER
  MOTHER
  COUSIN
  AUNT
  OTHER
}

Enum RoleEnum {
  ADMIN
  EMPLOYEE
  DOCTOR
  NURSE
}

Enum ShiftEnum {
  MORNING8
  AFTERNOON8
  NIGHT8
  MORNING12
  NIGHT12
  LONG
}

Ref: Employee.personID - Person.id

Ref: Employee.createdById - Employee.id

Ref: Employee.departmentId > Department.id

Ref: User.employeeId - Employee.id [delete: Cascade]

Ref: Visit.creatorId > Employee.id

Ref: Visit.patientId > Person.id

Ref: Visit.companionId > Person.id

Ref: Visit.incidentId > Incident.id

Ref: Visit.carId > CarNumber.id

Ref: Incident.carId > CarNumber.id

Ref: CompanionsOnIncidents.companionId > Person.id

Ref: CompanionsOnIncidents.incidentId > Incident.id