//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Person {
  id String [pk]
  firstName String [not null]
  secondName String [not null]
  thirdName String [not null]
  fourthName String [not null]
  SSN String [unique]
  verificationMethod IdentityEnum
  gender GenderEnum [not null]
  birthDate DateTime
  phone String [unique]
  governate String
  address String
  type PersonType [not null]
  employee Employee
  patient Patient
  companion Companion
}

Table Patient {
  id String [pk]
  comorbidities Comorbidity[] [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  person Person [not null]
  personId String [unique, not null]
  medicalRecords MedicalRecord [not null]
  visits Visit [not null]
}

Table Companion {
  id String [pk]
  kinship KinshipEnum
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  person Person [not null]
  personId String [unique, not null]
  visits Visit [not null]
  CompanionsOnIncidents CompanionsOnIncidents [not null]
}

Table Employee {
  id String [pk]
  role RoleEnum [not null]
  shift ShiftEnum [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  auth User
  person Person [not null]
  personId String [unique, not null]
  createdByEmployee Employee
  createdById String
  createdEmployees Employee [not null]
  visitsCreated Visit [not null]
  department Department [not null]
  departmentId String [not null]
}

Table User {
  username String [pk]
  password String [not null]
  email String [unique]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  employee Employee [not null]
  employeeId String [unique, not null]
}

Table Department {
  id String [pk]
  name String [unique, not null]
  Employees Employee [not null]
}

Table Visit {
  code String [pk]
  sequenceNumber Int
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  AdditionalInformation VisitAdditionalInformation
  additionalInfoId String
  creator Employee [not null]
  creatorId String [not null]
  patient Patient
  patientId String
  companion Companion
  companionId String
  medicalRecord MedicalRecord
  transfers Transfer [not null]
  incident Incident
  incidentId String
}

Table Incident {
  id String [pk]
  numberOfPatients Int [not null]
  isCompleted Boolean [not null, default: false]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  AdditionalInformation VisitAdditionalInformation
  additionalInfoId String
  visits Visit [not null]
  CompanionsOnIncidents CompanionsOnIncidents [not null]
}

Table CompanionsOnIncidents {
  companion Companion [not null]
  companionId String [not null]
  incident Incident [not null]
  incidentId String [not null]

  indexes {
    (companionId, incidentId) [pk]
  }
}

Table CarNumber {
  id String [pk]
  firstChar String [not null]
  secondChar String [not null]
  thirdChar String [not null]
  number Int [not null]
  VisitAdditionalInformation VisitAdditionalInformation [not null]

  indexes {
    (firstChar, secondChar, thirdChar, number) [unique]
  }
}

Table Attendant {
  id String [pk]
  SSN String [unique]
  cardId String [unique]
  name String [not null]
  attendantRole AttendantRole [not null]
  VisitAdditionalInformation VisitAdditionalInformation [not null]
}

Table VisitAdditionalInformation {
  id String [pk]
  Car CarNumber
  carId String
  cameFrom CameFromOptions
  injuryLocation String
  injuryCause String
  notes String
  Attendant Attendant
  attendantId String
  Incident Incident [not null]
  Visit Visit [not null]
}

Table MedicalRecord {
  id String [pk]
  mainComplaint String
  consciousnessLevel ConsciousnessLevel
  triage Triage
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  visit Visit [not null]
  visitCode String [unique, not null]
  vitals Vitals [not null]
  Patient Patient
  patientId String
}

Table Vitals {
  id String [pk]
  temp Float
  PR Float
  RR Float
  painScore Float
  SBP Float
  DBP Float
  SpO2 Float
  CVP Float
  GCS Float
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  medicalRecord MedicalRecord [not null]
  medcalRecordId String [not null]
}

Table Transfer {
  id String [pk]
  from String [not null]
  to String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  visit Visit [not null]
  visitCode String [not null]
}

Enum PersonType {
  PATIENT
  COMPANION
  EMPLOYEE
}

Enum IdentityEnum {
  NATIONALIDCARD
  PASSPORT
}

Enum GenderEnum {
  MALE
  FEMALE
}

Enum KinshipEnum {
  BROTHER
  SISTER
  FATHER
  MOTHER
  COUSIN
  AUNT
  OTHER
}

Enum RoleEnum {
  ADMIN
  EMPLOYEE
  DOCTOR
  NURSE
}

Enum ShiftEnum {
  MORNING8
  AFTERNOON8
  NIGHT8
  MORNING12
  NIGHT12
  LONG
}

Enum CameFromOptions {
  HOME
  ACCIDENT
  PRISONER
}

Enum AttendantRole {
  PARAMEDIC
  OFFICER
}

Enum Triage {
  STANDARD
  IMMEDIATE
  CRITICAL
  URGENT
}

Enum ConsciousnessLevel {
  ALERT
  VERBAL_RESPONSIVE
  PAIN_RESPONSIVE
  UNRESPONSIVE
}

Enum Comorbidity {
  HYPERTENSION
  DIABETES
  CARDIOVASCULAR_DISEASE
  OBESITY
  CHRONIC_RESPIRATORY_CONDITION
  IMMUNODEFICIENCY_DISORDER
  CHRONIC_KIDNEY_DISEASE
  LIVER_DISEASE
  CANCER
  AUTOIMMUNE_DISORDER
  NEUROLOGICAL_DISORDER
  GASTROINTESTINAL_DISORDER
  ENDOCRINE_DISORDER
  PSYCHIATRIC_DISORDER
  BONE_AND_JOINT_DISORDER
  INFECTIOUS_DISEASE
  HEMATOLOGICAL_DISORDER
  METABOLIC_SYNDROME
  SLEEP_APNEA
  SUBSTANCE_USE_DISORDER
}

Ref: Patient.personId - Person.id

Ref: Companion.personId - Person.id

Ref: Employee.personId - Person.id

Ref: Employee.createdById - Employee.id

Ref: Employee.departmentId > Department.id

Ref: User.employeeId - Employee.id [delete: Cascade]

Ref: Visit.additionalInfoId > VisitAdditionalInformation.id

Ref: Visit.creatorId > Employee.id

Ref: Visit.patientId > Patient.id

Ref: Visit.companionId > Companion.id

Ref: Visit.incidentId > Incident.id

Ref: Incident.additionalInfoId > VisitAdditionalInformation.id

Ref: CompanionsOnIncidents.companionId > Companion.id

Ref: CompanionsOnIncidents.incidentId > Incident.id

Ref: VisitAdditionalInformation.carId > CarNumber.id

Ref: VisitAdditionalInformation.attendantId > Attendant.id

Ref: MedicalRecord.visitCode - Visit.code

Ref: MedicalRecord.patientId > Patient.id

Ref: Vitals.medcalRecordId > MedicalRecord.id

Ref: Transfer.visitCode > Visit.code